@page "/reportvoucher"
@rendermode InteractiveServer
@using LibraryServices.Model;
<MudPaper Elevation="0" Class="w-100 bg-none border-radius-0">

    <MudPaper Class="w-100 bg-white border-radius-0" Elevation="0">

        <MudGrid Class="ma-0 py-5 w-100">

            <MudItem Class="px-4 py-0 d-flex flex-column" xs="3">
                <MudText> ວັນທີເລິ່ມຕົ້ນ </MudText>
                <MudDatePicker Variant="Variant.Outlined" ShowToolbar="false" AnchorOrigin="Origin.BottomLeft" TextChanged=" valuedateStart" />
            </MudItem>

            <MudItem Class="px-4 py-0 d-flex flex-column" xs="3">
                <MudText> ວັນທີສິ້ນສຸດ </MudText>
                <MudDatePicker Variant="Variant.Outlined" ShowToolbar="false" AnchorOrigin="Origin.BottomLeft" TextChanged="valuedateend" />
            </MudItem>
            <MudItem Class="px-4 py-0 d-flex flex-column" xs="3">
                <MudText> ຜູ້ຜະລິດບັດ </MudText>
                <MudSelect T="string" Variant="Variant.Outlined" AnchorOrigin="Origin.BottomCenter" ValueChanged="ValueSupplier" Value="@voucherreportrequest.suppliername">
                    <MudSelectItem Value=@("0")>
                        ລວມທັງໝົດ
                    </MudSelectItem>
                    @if (suppliermodel.Count > 0)
                    {
                        foreach (var item in suppliermodel)
                        {
                            <MudSelectItem Value=@($"{item.supplier_name}")>
                                @item.supplier_name
                            </MudSelectItem>
                        }

                    }


                </MudSelect>


            </MudItem>
            <MudItem Class="px-4 py-0 d-flex flex-column" xs="3">
                <MudText> ແຂວງ </MudText>
                <MudSelect T="string" Variant="Variant.Outlined" AnchorOrigin="Origin.BottomCenter" ValueChanged="ValuePovince" Value="@voucherreportrequest.provincename" Class="text-stds">

                    <MudSelectItem Value=@("0")>
                        ລວມທັງໝົດ
                    </MudSelectItem>
                    @if (provincemodel.Count > 0)
                    {
                        foreach (var item in provincemodel)
                        {
                            <MudSelectItem Value=@($"{item.provincename}")>
                                @item.provincename
                            </MudSelectItem>
                        }

                    }

                </MudSelect>
            </MudItem>
            <MudItem xs="12" Class="px-4  pb-0 pt-5 d-flex align-items-center">
                <MudButton StartIcon="@Icons.Material.Filled.Search" OnClick="getreportVoucher" Class="bg-primary-btn   color-white fill-white w-120-px h-45-px"> ຄົ້ນຫາຂໍ້ມູນ  </MudButton>
                <MudButton StartIcon="@Icons.Material.Filled.Refresh" Class="bg-clear-btn color-white fill-white  w-120-px h-45-px ml-4"> ຍົກເລີກ  </MudButton>
            </MudItem>
        </MudGrid>


    </MudPaper>

    <MudPaper Class="w-100 mt-3 pb-10-rem bg-none" Elevation="0">
        <MudCard>
            <MudButton OnClick="ExportExcel">export</MudButton>
        </MudCard>
        @if (loading == true)
        {
            <MudCard Elevation="0" Class="w-100 bg-none border-radius-0 align-items-center">
                <MudProgressCircular Indeterminate="true" />
                <MudText> laoding  </MudText>
            </MudCard>
        }
        else
        {

            <MudTable Items="@blockcardmodel" Hover="true" SortLabel="Sort By">
                <HeaderContent>
                    <MudTh> no </MudTh>
                    <MudTh>  <MudTableSortLabel Enabled="@enable" SortBy="new Func<BlockCardReponse, object>(x => x.bs_old)"> bs_old </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.facevalue)"> facevalue </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.expire_date)"> expire_date </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.bs_new)"> bs_new </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.msisdn)"> msisdn </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.province)">  province   </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.create_time)">  create_time   </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.remark)"> remark   </MudTableSortLabel> </MudTh>
                    <MudTh>  <MudTableSortLabel SortBy="new Func<BlockCardReponse, object>(x => x.create_user)">  create_user   </MudTableSortLabel> </MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="">@(blockcardmodel.IndexOf(context) + 1)</MudTd>
                    <MudTd> @context.bs_old </MudTd>
                    <MudTd> @context.facevalue </MudTd>
                    <MudTd> @context.expire_date </MudTd>
                    <MudTd> @context.bs_new </MudTd>
                    <MudTd> @context.msisdn </MudTd>
                    <MudTd> @context.province </MudTd>
                    <MudTd> @context.create_time </MudTd>
                    <MudTd> @context.remark </MudTd>
                    <MudTd> @context.create_user </MudTd>

                </RowTemplate>
                <PagerContent>
                    <MudTablePager>

                    </MudTablePager>
                </PagerContent>

            </MudTable>

        }
    </MudPaper>

</MudPaper>

<style>
    .mud-input > input.mud-input-root-outlined.mud-input-root-adorned-end, div.mud-input-slot.mud-input-root-outlined.mud-input-root-adorned-end {
        font-family: 'Noto Sans Lao';
    }
</style>

@code {

}
